# FastAPI Chat API

**Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ**: API Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ñ‡Ğ°Ñ‚Ğ°Ğ¼Ğ¸ Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ÑĞ¼Ğ¸.

---

## ğŸ— ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½ Ğ½Ğ° Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞ»Ğ¾Ğ¸:

    fastapi-chat-api/
    â”œâ”€â”€ src/
    â”‚ â”œâ”€â”€ api/                         # Ğ Ğ¾ÑƒÑ‚ĞµÑ€Ñ‹ FastAPI
    â”‚ â”‚ â”œâ”€â”€ routers.py                 # Ğ­Ğ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹ Ğ´Ğ»Ñ Ñ‡Ğ°Ñ‚Ğ¾Ğ² Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
    â”‚ â”‚ â””â”€â”€ dependencies.py            # Depends Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ¿Ñ€Ğ°Ğ² Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
    â”‚ â”œâ”€â”€ service/                     # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
    â”‚ â”‚ â”œâ”€â”€ chat.py
    â”‚ â”‚ â””â”€â”€ message.py
    â”‚ â”œâ”€â”€ repo/                        # Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ‘Ğ”
    â”‚ â”‚ â”œâ”€â”€ chat.py
    â”‚ â”‚ â””â”€â”€ message.py
    â”‚ â”œâ”€â”€ models/                      # ĞœĞ¾Ğ´ĞµĞ»Ğ¸ SQLAlchemy (ORM)
    â”‚ â”‚ â”œâ”€â”€ chat.py
    â”‚ â”‚ â””â”€â”€ message.py
    â”‚ â”œâ”€â”€ schemas/                     # Pydantic ÑÑ…ĞµĞ¼Ñ‹ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸
    â”‚ â”‚ â”œâ”€â”€ chat.py
    â”‚ â”‚ â””â”€â”€ message.py
    â”‚ â”œâ”€â”€ core/                        # ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
    â”‚ â”‚ â”œâ”€â”€ config.py                  # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Pydantic
    â”‚ â”‚ â”œâ”€â”€ database.py                # ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
    â”‚ â”‚ â””â”€â”€ logger.py                  # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    â”‚ â””â”€â”€ init.py
    â”œâ”€â”€ migrations/                    # Alembic Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
    â”œâ”€â”€ tests/                         # Ğ¢ĞµÑÑ‚Ñ‹
    â”‚ â”œâ”€â”€ conftest.py
    â”‚ â”œâ”€â”€ test_chats.py
    â”‚ â””â”€â”€ test_messages.py
    â”œâ”€â”€ .env.example                   # ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
    â”œâ”€â”€ Dockerfile                     # ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
    â”œâ”€â”€ docker-compose.yml             # Docker Compose ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
    â”œâ”€â”€ alembic.ini                    # Alembic ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³
    â”œâ”€â”€ pyproject.toml                 # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° (Poetry)
    â”œâ”€â”€ poetry.lock                    # Ğ—Ğ°Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
    â””â”€â”€ README.md                      # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

---
## ğŸ“¦ ĞœĞ¾Ğ´ĞµĞ»Ğ¸

**Chat**
- `id: int`
- `title: str`
- `created_at: datetime`

**Message**
- `id: int`
- `chat_id: int` (FK Ğ½Ğ° Chat)
- `text: str`
- `created_at: datetime`

Ğ¡Ğ²ÑĞ·ÑŒ: Chat 1 â€” N Message.
---
## ğŸ›  ĞœĞµÑ‚Ğ¾Ğ´Ñ‹ API

| ĞœĞµÑ‚Ğ¾Ğ´ | ĞŸÑƒÑ‚ÑŒ | Body | Response |
|-------|------|------|----------|
| POST  | /chats/ | `title: str` | ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‡Ğ°Ñ‚ |
| POST  | /chats/{id}/messages/ | `text: str` | ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ |
| GET   | /chats/{id}?limit=N |  | Ñ‡Ğ°Ñ‚ + Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ N ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ (ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ `created_at`) |
| DELETE| /chats/{id} |  | 204 No Content |

---
## âš™ï¸ Ğ¡Ñ‚ĞµĞº

- FastAPI
- SQLAlchemy + PostgreSQL
- Alembic Ğ´Ğ»Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¹
- Pydantic Ğ´Ğ»Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ ÑĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- Poetry Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑĞ¼Ğ¸ Ğ¸ ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
- Docker + docker-compose
- Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· Python logger
- Ğ¢ĞµÑÑ‚Ñ‹ Ñ‡ĞµÑ€ĞµĞ· pytest

---
## ğŸ“¦ Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‡ĞµÑ€ĞµĞ· Docker

### 1. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞµĞ¼ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
```bash
git clone https://github.com/Dafoe17/fastapi-chat-api.git
cd fastapi-auth-test
```

### 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ñ„Ğ°Ğ¹Ğ» Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ğ¼Ğ¸
```bash
cp .env.example .env
```

### 3. ĞŸĞ¾Ğ´Ğ½ÑÑ‚ÑŒ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ñ‡ĞµÑ€ĞµĞ· Docker
```bash
docker-compose up --build
```

### 4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°
Home: http://localhost:8000

Swagger UI: http://localhost:8000/docs

```bash
curl http://localhost:8000/ping
```

### 5. Ğ¢ĞµÑÑ‚Ñ‹

```bash
docker-compose exec web pytest -v
```


